var app=function(){function a(){x.click(function(a){a.preventDefault(),r.toggleClass("nav-is-open")}),setTimeout(function(){w.addClass("can-transition")},1);var a=function(){u>10?r.addClass("is-scrolled"):r.removeClass("is-scrolled"),window.requestAnimationFrame(a)};a()}function b(){q.resize(function(){o=w.width(),p=v.find(".container").width(),w.css("transform","translateX(-"+(p/2-o/2)+"px)")}).resize();var a=function(){u>10&&t>y?(v.removeClass("logo-hidden"),w.css("transform","translateX(0)")):t>y?(v.addClass("logo-hidden"),w.css("transform","translateX(-"+(p/2-o/2)+"px)")):w.removeAttr("style"),window.requestAnimationFrame(a)};a()}function c(){var a=$(".interactive-logo"),b=$(".cover-footer"),c=v.outerHeight(!0),d=b.outerHeight(!0);q.resize(function(){c=v.outerHeight(!0),d=b.outerHeight(!0),a.css("height",s-d-c)}).resize()}function d(){function a(){e.attr("height",f),28>=f&&(f+=2,c=requestAnimationFrame(a))}function b(){e.attr("height",f),f>=2&&(f-=2,c=requestAnimationFrame(b))}var c,d=$("#js-down-arrow"),e=d.find("#down-arrow-fill"),f=0;$(".down-arrow").hover(function(){cancelAnimationFrame(c),c=requestAnimationFrame(a)},function(){cancelAnimationFrame(c),c=requestAnimationFrame(b)}),$("#js-down-btn").on("click",function(){$("html, body").animate({scrollTop:s-v.height()},500)})}function e(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}function f(a,b,c){var d=$(a);d.length>0&&d.each(function(){function a(a){var b=function(){switch(f=i/j,a){case"in":g=1>=f,i++;break;case"out":g=f>=0,i--}if(g){for(var c=0;c<m.length;c++){var h=0-n[c];m[c].style.strokeDashoffset=e(f,n[c],h,1)}d=window.requestAnimationFrame(b)}};b()}for(var d,f,g,h,i=0,j=c,k=$(this).find("svg"),h=k.find("path"),m=new Array,n=new Array,o=0;o<h.length;o++)m[o]=h[o],l=m[o].getTotalLength(),n[o]=l,m[o].style.strokeDasharray=l+" "+(l+2),m[o].style.strokeDashoffset=l;"hover"==b?$(this).hover(function(){window.cancelAnimationFrame(d),a("in")},function(){window.cancelAnimationFrame(d),a("out")}):a("in")})}function g(a,b){var c=$(a),d=c.find("svg > g");d.length>0&&d.each(function(a){for(var c,d,f=$(this),g=0,h=b,i=f.find("path"),j=new Array,k=new Array,m=0;m<i.length;m++)j[m]=i[m],l=j[m].getTotalLength(),k[m]=l,j[m].style.strokeDasharray=l+" "+(l+2),j[m].style.strokeDashoffset=l;var n=function(){if(d=g/h,1>=d){g++;for(var a=0;a<j.length;a++){var b=0-k[a];j[a].style.strokeDashoffset=e(d,k[a],b,1)}c=window.requestAnimationFrame(n)}else window.cancelAnimationFrame(c),j=[],lengths=[]};setTimeout(function(){n()},750*a)})}function h(){q.load(function(){$(".interactive-container").addClass("has-loaded"),app.drawSvgGroups(".interactive-container",50)}),$("#interactive-refresh").hover(function(){app.drawSvgGroups(".interactive-container",50)},function(){})}function i(){var a=$("#js-monkeys"),b=["toss","banana","badgers","monkeys","damn","flying fig","duck"],c=0;t>y&&setInterval(function(){a.text(b[c]),c<b.length?c++:c=0},600)}function j(){var a,b,c=$("#video-player"),d=c.find(".video-container"),e=c.find("iframe"),f=e.attr("src").split("?")[0];q.resize(function(){t*(9/16)>s-120?(b=s-120,a=b*(16/9),d.css({width:a,height:b})):(a=t-40,b=a*(9/16),d.css({width:a,height:b}))}).resize(),$("#js-play-btn").on("click",function(a){a.preventDefault(),c.fadeIn(500).addClass("open");var b={method:"play"};e[0].contentWindow.postMessage(JSON.stringify(b),f)}),$("#js-close-btn").on("click",function(a){a.preventDefault(),c.removeClass("open").fadeOut(500);var b={method:"pause"};e[0].contentWindow.postMessage(JSON.stringify(b),f)})}function k(a,b,c){c||(c=window.location.href);var d=new RegExp("([?&])"+a+"=.*?(&|#|$)(.*)","gi");if(d.test(c)){if("undefined"!=typeof b&&null!==b)return c.replace(d,"$1"+a+"="+b+"$2$3");var e=c.split("#");return c=e[0].replace(d,"$1$3").replace(/(&|\?)$/,""),"undefined"!=typeof e[1]&&null!==e[1]&&(c+="#"+e[1]),c}if("undefined"!=typeof b&&null!==b){var f=-1!==c.indexOf("?")?"&":"?",e=c.split("#");return c=e[0]+f+a+"="+b,"undefined"!=typeof e[1]&&null!==e[1]&&(c+="#"+e[1]),c}return c}function m(){var a=$(".filter"),b=a.find("select");b.selectOrDie(),b.change(function(){$this=$(this);var a=$this.data("query"),c=$this.val(),d=window.location.search,e=k(a,c);d.indexOf(a+"="+c)<1&&(window.location=e,b.selectOrDie("disable"))})}function n(){a(),q.scroll(function(){u=q.scrollTop()}),q.resize(function(){s=q.height(),t=q.width()})}var o,p,q=$(window),r=$("body"),s=q.height(),t=q.width(),u=q.scrollTop(),v=$("#js-header"),w=$("#js-nav"),x=$("#js-nav-trigger"),y=640;return{init:n,homeNav:b,videoPlayer:j,arrowAnim:d,monkeys:i,drawSvg:f,drawSvgGroups:g,initInteractive:h,resizeInteractive:c,initFilters:m}}();